<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Payment Analytics</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="p-4">
  <h2>Payment Analytics</h2>
  <canvas id="paymentChart" height="100"></canvas>

<script>
const token = localStorage.getItem('adminToken');
if (!token) window.location.href = 'index.html';

async function loadPayments() {
  const res = await fetch('http://localhost:5000/api/admin/payment-analytics', {
    headers: { 'Authorization': 'Bearer ' + token }
  });
  const data = await res.json();

  new Chart(document.getElementById('paymentChart'), {
    type: 'bar',
    data: {
      labels: data.months,
      datasets: [{
        label: 'Total Revenue ($)',
        data: data.revenue,
        backgroundColor: '#0d6efd'
      }]
    }
  });
}

loadPayments();
</script>
</body>
</html>